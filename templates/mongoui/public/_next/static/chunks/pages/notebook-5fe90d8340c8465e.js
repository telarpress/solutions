(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[908],{44948:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/notebook",function(){return n(82348)}])},23170:function(t,e,n){"use strict";n.a(t,async function(t,i){try{n.d(e,{Z:function(){return S}});var r=n(85893),a=n(67294),o=n(63764),s=n(45007),l=n(70161),c=n(68820),u=n(77746),d=n(20215),f=n(53234),h=n(13396),p=n(11898),m=n(509),y=n(70141),_=n(41762),b=n(14151),g=n(56529),v=n(6558),x=n(30552),w=t([m,v]);function S(t){let e=(0,y.Z)(),n=(0,a.useRef)(),[i,w]=(0,a.useState)(),[S,C]=(0,a.useState)(),k=(0,l.gh)(),[{conn:N}]=(0,g.Z)(),$=(0,v.R)(N),[E,D]=(0,a.useState)(!1),O=(0,s.I0)(),I=(0,a.useCallback)(e=>{let{_result:i,_error:r}=e;n.current&&(i||r)&&(void 0!==t.index?O(_.N.notebook.updateNotebook({index:t.index,value:n.current,result:i,error:r,ts:Date.now()})):(O(_.N.notebook.appendNotebook({value:n.current,result:i,error:r,ts:Date.now()})),w(void 0),C(void 0),n.current=void 0))},[O,t.index,n]),j=(0,a.useCallback)(async t=>{if($&&t)try{D(!0);let e=await (0,m.$)($,t),n="function"==typeof e?"Function ".concat(e.name):e;w(n),C(void 0),I({_result:n})}catch(n){if(n instanceof Error){var e;w(void 0);let i=(null==n?void 0:null===(e=n.message)||void 0===e?void 0:e.startsWith("(CommandNotFound)"))?"Command Error: ".concat(t):n.message;C(i),I({_error:i})}}finally{D(!1)}},[$,I]);(0,a.useEffect)(()=>{n.current=t.value},[t.value]),(0,a.useEffect)(()=>{w(t.result)},[t.result]),(0,a.useEffect)(()=>{C(t.error)},[t.error]);let P=(0,a.useCallback)(t=>{t.onKeyDown(async e=>{3===e.keyCode&&(e.metaKey||e.ctrlKey)&&(e.stopPropagation(),await j(t.getValue()))})},[j]),M=(0,a.useCallback)(t=>{n.current=t},[]),A=(0,a.useMemo)(()=>({tabSize:b.t.tabSize.get,readOnly:E,lineDecorationsWidth:0,glyphMargin:!1,folding:!1,lineNumbers:"off",minimap:{enabled:!1},wordWrap:"on",contextmenu:!1,scrollbar:{verticalScrollbarSize:0,horizontalSliderSize:0}}),[E]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(c.z,{styles:{root:{backgroundColor:e?"#1e1e1e":"#fffffe",margin:20,padding:10,childrenGap:0,maxWidth:"unset",minHeight:"unset"}},children:[(0,r.jsx)("div",{children:(0,r.jsx)(o.ZP,{height:90,language:"typescript",value:n.current,onChange:M,theme:e?"vs-dark":"vs",onMount:P,options:A})}),(0,r.jsxs)(u.k,{styles:{root:{display:"flex",justifyContent:"space-between"}},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(d.G,{content:"Run (⌘+↵)",directionalHint:f.b.bottomCenter,styles:{root:{display:"inline-block"}},children:(0,r.jsx)(h.h,{disabled:E,iconProps:{iconName:"Play"},onClick:()=>{j(n.current)}})}),t.ts?(0,r.jsx)(p.x,{styles:{root:{color:k.palette.neutralSecondary}},children:new Date(t.ts).toLocaleString([],{hour12:!1})}):null]}),void 0!==t.index?(0,r.jsx)(h.h,{disabled:E,iconProps:{iconName:"Delete",styles:{root:{color:k.palette.red}}},onClick:()=>{void 0!==t.index&&O(_.N.notebook.removeNotebook(t.index))}}):null]})]}),S?(0,r.jsx)("pre",{style:{margin:20,marginTop:0,fontSize:12,whiteSpace:"pre-wrap",wordBreak:"break-all",overflow:"scroll",color:k.palette.red},children:S}):void 0!==i?(0,r.jsx)(x.Z,{value:i,style:{margin:20,marginTop:0}}):null]})}[m,v]=w.then?(await w)():w,i()}catch(t){i(t)}})},30552:function(t,e,n){"use strict";n.d(e,{Z:function(){return l}});var i=n(85893),r=n(67294),a=n(70161),o=n(67849),s=n(83135);function l(t){let e=(0,r.useMemo)(()=>(0,o.Pz)(t.value,!0),[t.value]),n=(0,s.Z)(e),l=(0,a.gh)();return(0,i.jsx)("pre",{style:{fontSize:12,margin:0,whiteSpace:"pre-wrap",wordBreak:"break-all",color:l.palette.neutralPrimary,...t.style},dangerouslySetInnerHTML:{__html:n}})}},83135:function(t,e,n){"use strict";n.d(e,{Z:function(){return l}});var i=n(67294),r=n(70141),a=n(63764),o=n(14151),s=n(59820);function l(t){let e=(0,r.Z)(),n=(0,a.Ik)();(0,i.useEffect)(()=>{n&&n.editor.setTheme(e?"vs-dark":"vs")},[e,n]);let{data:l}=(0,s.ZP)(n?["colorize",n,t,o.t.tabSize.get]:null,()=>n.editor.colorize(t,"javascript",{tabSize:o.t.tabSize.get}));return l||t}},82348:function(t,e,n){"use strict";n.a(t,async function(t,i){try{n.r(e),n.d(e,{default:function(){return m}});var r=n(85893),a=n(67294),o=n(45007),s=n(70161),l=n(73295),c=n(67516),u=n(23170),d=n(41762),f=n(11736),h=n(56529),p=t([u]);function m(){let[{conn:t}]=(0,h.Z)(),e=(0,o.v9)(t=>t.notebook.notebooks),n=(0,o.v9)(t=>t.root.collectionsMap);(0,f.l)(n);let i=(0,s.gh)(),p=(0,a.useCallback)((t,e)=>(null==e?void 0:e({...t,styles:{...null==t?void 0:t.styles,cell:{paddingTop:0,paddingBottom:0,backgroundColor:i.palette.neutralLighter,borderBottom:"1px solid ".concat(i.palette.neutralLight)}}}))||null,[i]),m=(0,o.I0)();return(0,a.useEffect)(()=>{m(d.N.notebook.clearNotebook())},[t,m]),(0,r.jsx)("div",{style:{overflowY:"scroll",backgroundColor:i.palette.neutralLighter},children:(0,r.jsx)(l.W,{styles:{contentWrapper:e.length?void 0:{height:0}},items:e,selectionMode:c.oW.none,compact:!0,isHeaderVisible:!1,columns:[{key:"",name:"Notebooks",minWidth:0}],cellStyleProps:{cellLeftPadding:0,cellRightPadding:0,cellExtraRightPadding:0},onRenderRow:p,onRenderItemColumn:u.Z,onRenderDetailsFooter:()=>(0,r.jsx)("div",{style:{marginBottom:"calc(100vh - 130px - 32px - 44px)"},children:(0,r.jsx)(u.Z,{})})})})}u=(p.then?(await p)():p)[0],i()}catch(t){i(t)}})},509:function(t,e,n){"use strict";n.a(t,async function(t,i){try{n.d(e,{$:function(){return D}});var r=n(57121),a=n(82463),o=n(25321),s=n(85058),l=n.n(s),c=n(29608),u=n(14176),d=n.n(u),f=n(14293),h=n.n(f),p=n(67849),m=n(26162),y=n(74225),_=t([c,m]);[c,m]=_.then?(await _)():_;var b=new WeakMap,g=new WeakMap,v=new WeakMap;class O{async explain(){return(0,m.f)((0,r._)(this,b),(0,r._)(this,g),{explain:(0,r._)(this,v)},{canonical:!0})}async toArray(){let{cursor:{firstBatch:t}}=await (0,m.f)((0,r._)(this,b),(0,r._)(this,g),(0,r._)(this,v),{canonical:!0});return t}constructor(t,e,n={}){(0,a._)(this,b,{writable:!0,value:void 0}),(0,a._)(this,g,{writable:!0,value:void 0}),(0,a._)(this,v,{writable:!0,value:void 0}),(0,o._)(this,b,t),(0,o._)(this,g,e),(0,o._)(this,v,n)}}var x=new WeakMap,w=new WeakMap,S=new WeakMap;class I{skip(t){return(0,r._)(this,S).skip=t,this}limit(t){return(0,r._)(this,S).limit=t,this}sort(t){return(0,r._)(this,S).sort=t,this}hint(t){return(0,r._)(this,S).hint=t,this}project(t){return(0,r._)(this,S).projection=t,this}async explain(){return(0,m.f)((0,r._)(this,x),(0,r._)(this,w),{explain:(0,r._)(this,S)},{canonical:!0})}async toArray(){let{cursor:{firstBatch:t}}=await (0,m.f)((0,r._)(this,x),(0,r._)(this,w),(0,r._)(this,S),{canonical:!0});return t}constructor(t,e,n={}){(0,a._)(this,x,{writable:!0,value:void 0}),(0,a._)(this,w,{writable:!0,value:void 0}),(0,a._)(this,S,{writable:!0,value:void 0}),(0,o._)(this,x,t),(0,o._)(this,w,e),(0,o._)(this,S,n)}}var C=new WeakMap,k=new WeakMap,N=new WeakMap;class j{aggregate(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new O((0,r._)(this,C),(0,r._)(this,k),{aggregate:(0,r._)(this,N),pipeline:t,cursor:e.batchSize?{batchSize:e.batchSize}:{},allowDiskUse:e.allowDiskUse,maxTimeMS:e.maxTimeMS,hint:e.hint})}find(t){return new I((0,r._)(this,C),(0,r._)(this,k),{find:(0,r._)(this,N),filter:t})}async findOne(t){let{cursor:{firstBatch:e}}=await (0,m.f)((0,r._)(this,C),(0,r._)(this,k),{find:(0,r._)(this,N),filter:t,limit:1},{canonical:!0});return(null==e?void 0:e[0])||null}async insertOne(t){let{n:e}=await (0,m.f)((0,r._)(this,C),(0,r._)(this,k),{insert:(0,r._)(this,N),documents:[t]});return{insertedCount:e}}async insertMany(t){let{n:e}=await (0,m.f)((0,r._)(this,C),(0,r._)(this,k),{insert:(0,r._)(this,N),documents:t});return{insertedCount:e}}async updateOne(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{upserted:i,...a}=await (0,m.f)((0,r._)(this,C),(0,r._)(this,k),{update:(0,r._)(this,N),updates:[{q:t,u:e,upsert:n.upsert,multi:!1}]},{canonical:!0}),{n:o,nModified:s}=c.dF.parse(JSON.stringify(a));return d()({matchedCount:o,modifiedCount:s,upsertedCount:(null==i?void 0:i.length)||0,upsertedId:null==i?void 0:i[0]._id},h())}async updateMany(t,e){var n;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{upserted:a,...o}=await (0,m.f)((0,r._)(this,C),(0,r._)(this,k),{update:(0,r._)(this,N),updates:[{q:t,u:e,upsert:i.upsert,multi:!0}]},{canonical:!0}),{n:s,nModified:l}=c.dF.parse(JSON.stringify(o));return d()({matchedCount:s,modifiedCount:l,upsertedCount:(null==a?void 0:a.length)||0,upsertedId:null==a?void 0:null===(n=a[0])||void 0===n?void 0:n._id},h())}async deleteOne(t){let{n:e}=await (0,m.f)((0,r._)(this,C),(0,r._)(this,k),{delete:(0,r._)(this,N),deletes:[{q:t,limit:1}]});return{deletedCount:e}}async deleteMany(t){let{n:e}=await (0,m.f)((0,r._)(this,C),(0,r._)(this,k),{delete:(0,r._)(this,N),deletes:[{q:t,limit:0}]});return{deletedCount:e}}async estimatedDocumentCount(){let{n:t}=await (0,m.f)((0,r._)(this,C),(0,r._)(this,k),{count:(0,r._)(this,N)});return t}async countDocuments(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{n:e}=await (0,m.f)((0,r._)(this,C),(0,r._)(this,k),{count:(0,r._)(this,N),query:t});return e}async listIndexes(){let{cursor:{firstBatch:t}}=await (0,m.f)((0,r._)(this,C),(0,r._)(this,k),{listIndexes:(0,r._)(this,N)});return t}constructor(t,e,n){(0,a._)(this,C,{writable:!0,value:void 0}),(0,a._)(this,k,{writable:!0,value:void 0}),(0,a._)(this,N,{writable:!0,value:void 0}),(0,o._)(this,C,t),(0,o._)(this,k,e),(0,o._)(this,N,n)}}var $=new WeakMap,E=new WeakMap;class P{async createCollection(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await (0,m.f)((0,r._)(this,$),(0,r._)(this,E),{create:t,...e}),new j((0,r._)(this,$),(0,r._)(this,E),t)}async dropDatabase(){await (0,m.f)((0,r._)(this,$),(0,r._)(this,E),{dropDatabase:1})}async dropCollection(t){await (0,m.f)((0,r._)(this,$),(0,r._)(this,E),{drop:t})}async renameCollection(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};await (0,m.f)((0,r._)(this,$),(0,r._)(this,E),{renameCollection:t,to:e,dropTarget:n.dropTarget})}constructor(t,e){(0,a._)(this,$,{writable:!0,value:void 0}),(0,a._)(this,E,{writable:!0,value:void 0}),(0,o._)(this,$,t),(0,o._)(this,E,e)}}async function D(t,e){let n=new y.A({lastExpressionCallbackFunctionName:"__LAST_EXPRESSION_CALLBACK_FUNCTION_NAME__",lexicalContextStoreVariableName:"__LEXICAL_CONTEXT_STORE_VARIABLE_NAME__"});return new Promise(i=>{let r={...p.vH,__LEXICAL_CONTEXT_STORE_VARIABLE_NAME__:{},__LAST_EXPRESSION_CALLBACK_FUNCTION_NAME__:i,db:new Proxy({},{get:(e,n)=>new Proxy(new P(t,n),{get:(e,i)=>i in e?e[i]:new j(t,n,i)})})};l()(n.preprocess(e),r)})}i()}catch(t){i(t)}})},67849:function(t,e,n){"use strict";n.d(e,{Pz:function(){return function t(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if("string"==typeof e)return JSON.stringify(e);if("number"==typeof e)return e.toString();if("boolean"==typeof e)return"".concat(e);if(void 0===e)return"";if(null===e)return"null";if("$oid"in e)return'ObjectId("'.concat(e.$oid,'")');if("$date"in e&&"$numberLong"in e.$date)return o.t.timezoneOffset?'Date("'.concat((0,a.p)(parseInt(e.$date.$numberLong,10)),'")'):'ISODate("'.concat(new Date(parseInt(e.$date.$numberLong,10)).toISOString(),'")');if("$numberDecimal"in e)return'NumberDecimal("'.concat(e.$numberDecimal,'")');if("$numberDouble"in e)return e.$numberDouble;if("$numberInt"in e)return e.$numberInt;if("$numberLong"in e)return'NumberLong("'.concat(e.$numberLong,'")');if("$regularExpression"in e)return"/".concat(e.$regularExpression.pattern,"/").concat(e.$regularExpression.options||"");if("$timestamp"in e)return"Timestamp(".concat(e.$timestamp.t,", ").concat(e.$timestamp.i,")");if("$binary"in e)return"BinData(".concat(parseInt(e.$binary.subType,16),', "').concat(e.$binary.base64,'")');if("$minKey"in e&&1===e.$minKey)return"MinKey()";if("$maxKey"in e&&1===e.$maxKey)return"MaxKey()";if(Array.isArray(e)){if(!n)return"[".concat(e.map(e=>"".concat(t(e,n,i+o.t.tabSize.get))).join(", "),"]");let r=Array.from({length:i}).map(()=>" ").join("");return e.length?"[\n".concat(e.map(e=>"".concat(l).concat(r).concat(t(e,n,i+o.t.tabSize.get))).join(",\n"),"\n").concat(r,"]"):"[]"}let r=Object.entries(e);if(0===r.length)return"{}";if(!n)return"{ ".concat(r.map(e=>{let[r,a]=e;return"".concat(s(r),": ").concat(t(a,n,i+o.t.tabSize.get))}).join(", ")," }");let c=Array.from({length:i}).map(()=>" ").join("");return"{\n".concat(r.map(e=>{let[r,a]=e;return"".concat(l).concat(c).concat(s(r),": ").concat(t(a,n,i+o.t.tabSize.get))}).join(",\n"),"\n").concat(c,"}")}},Qc:function(){return u},vH:function(){return c}});var i=n(85058),r=n.n(i),a=n(49813),o=n(14151);function s(t){let e=t.toString();return e.includes("-")||e.includes(" ")||e.includes(".")||/^\d/.test(e)?'"'.concat(t,'"'):t}let l=Array.from({length:o.t.tabSize.get}).map(()=>" ").join(""),c={SubType:{Generic:0,Function:1,Binary_old:2,UUID_old:3,UUID:4,MD5:5,Encrypted:6,UserDefined:128},ObjectId:t=>({$oid:t}),Date:t=>({$date:{$numberLong:void 0!==t?new Date(t).getTime().toString():new Date().getTime().toString()}}),ISODate:t=>({$date:{$numberLong:void 0!==t?new Date(t).getTime().toString():new Date().getTime().toString()}}),NumberDecimal:t=>({$numberDecimal:t.toString()}),NumberInt:t=>({$numberInt:t.toString()}),NumberLong:t=>({$numberLong:t.toString()}),Timestamp:(t,e)=>({$timestamp:{t,i:e}}),BinData:(t,e)=>({$binary:{base64:e,subType:t.toString(16)}}),MinKey:()=>({$minKey:1}),MaxKey:()=>({$maxKey:1})};function u(t){return JSON.parse(JSON.stringify(r()(t,c),(t,e)=>e instanceof RegExp?{$regularExpression:{pattern:e.source,options:e.flags}}:e))}},49813:function(t,e,n){"use strict";n.d(e,{p:function(){return u},u:function(){return c}});var i=n(27484),r=n.n(i),a=n(70178),o=n.n(a),s=n(14151);r().extend(o());let l=Intl.NumberFormat();function c(t){return l.format(t)}function u(t){return 0===s.t.timezoneOffset.get?new Date(t).toISOString():r()(t).utcOffset(s.t.timezoneOffset.get).format()}},74225:function(t,e,n){"use strict";n.d(e,{A:function(){return d}});var i=n(77191),r=n(27848),a=n(76849);function o(t,e,n){e[t.name]=n}function s(t,e,n){for(let i of t.properties)"RestElement"===i.type&&c(i,e,n),"ObjectProperty"===i.type&&("Identifier"===i.value.type&&o(i.value,e,n),"ObjectPattern"===i.value.type&&s(i.value,e,n),"ArrayPattern"===i.value.type&&u(i.value,e,n),"AssignmentPattern"===i.value.type&&l(i.value,e,n))}function l(t,e,n){"Identifier"===t.left.type&&o(t.left,e,n),"ObjectPattern"===t.left.type&&s(t.left,e,n)}function c(t,e,n){"Identifier"===t.argument.type&&o(t.argument,e,n)}function u(t,e,n){for(let i of t.elements)i&&("RestElement"===i.type&&c(i,e,n),"Identifier"===i.type&&o(i,e,n),"ObjectPattern"===i.type&&s(i,e,n),"AssignmentPattern"===i.type&&l(i,e,n))}class d{preprocess(t){var e,n;let l;e=t,t=/^\s*\{/.test(e)&&/\}\s*$/.test(e)?"(".concat(e,")"):e,t=";".concat(t),l=(0,i.parse)(t,{allowAwaitOutsideFunction:!0});let{ast:c,lexicalContext:d}=function(t,e){let n=function(t){let e={};for(let n of t.program.body)"FunctionDeclaration"===n.type&&null!==n.id&&void 0!==n.id&&o(n.id,e,"function"),"ClassDeclaration"===n.type&&o(n.id,e,"class"),"VariableDeclaration"===n.type&&function(t,e){let{kind:n}=t;for(let i of t.declarations)(function(t,e,n){let i=t.id;"Identifier"===i.type&&o(i,e,n),"ObjectPattern"===i.type&&s(i,e,n),"ArrayPattern"===i.type&&u(i,e,n)})(i,e,n)}(n,e);return e}(t);!function(t,e){for(let[n,i]of Object.entries(e))if("function"!==i&&"function"===t[n])throw SyntaxError("Identifier '".concat(n,"' has already been declared"))}(e.lexicalContext,n);let{code:a}=(0,r.ZP)(t),l="";for(let[t,n]of Object.entries(e.lexicalContext))l+=function(t,e,n){let i="".concat(t," = ").concat(n.lexicalContextStoreVariableName,"['").concat(t,"'];");return"class"===e?"const ".concat(i):"function"===e?"".concat(i):"".concat(e," ").concat(i)}(t,n,e);for(let[t]of(l+=a,Object.entries(n)))l+="".concat(e.lexicalContextStoreVariableName,"['").concat(t,"'] = ").concat(t,";");return{ast:(0,i.parse)(l,{allowAwaitOutsideFunction:!0}),lexicalContext:{...e.lexicalContext,...n}}}(l=function(t,e){let n=a.ZP.statement("".concat(t,"(%%expression%%)")),i=e.program.body[e.program.body.length-1];switch(i&&i.type){case"ClassDeclaration":case"FunctionDeclaration":e.program.body.push(n({expression:i.id}));break;case"ExpressionStatement":e.program.body[e.program.body.length-1]=n({expression:i.expression});break;default:e.program.body.push(n({expression:null}))}return e}(this.lastExpressionCallbackFunctionName,l),{lexicalContext:this.lexicalContext,lexicalContextStoreVariableName:this.lexicalContextStoreVariableName}),f=(n=l=c,a.ZP.statement("(async () => { %%body%% })()")({body:n.program.body})),h=(0,r.ZP)(f).code;return this.lexicalContext=d,h}constructor(t){this.lexicalContext={},this.lastExpressionCallbackFunctionName=t.lastExpressionCallbackFunctionName,this.lexicalContextStoreVariableName=t.lexicalContextStoreVariableName}}}},function(t){t.O(0,[774,797,300,295,176,888,179],function(){return t(t.s=44948)}),_N_E=t.O()}]);