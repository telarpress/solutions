(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[348],{9830:function(e){"use strict";e.exports=function(e,n){if("string"===typeof e)return o(e);if("number"===typeof e)return a(e,n);return null},e.exports.format=a,e.exports.parse=o;var n=/\B(?=(\d{3})+(?!\d))/g,t=/(?:\.0*|(\.[^0]+)0+)$/,r={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},i=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function a(e,i){if(!Number.isFinite(e))return null;var a=Math.abs(e),o=i&&i.thousandsSeparator||"",s=i&&i.unitSeparator||"",l=i&&void 0!==i.decimalPlaces?i.decimalPlaces:2,u=Boolean(i&&i.fixedDecimals),c=i&&i.unit||"";c&&r[c.toLowerCase()]||(c=a>=r.pb?"PB":a>=r.tb?"TB":a>=r.gb?"GB":a>=r.mb?"MB":a>=r.kb?"KB":"B");var d=(e/r[c.toLowerCase()]).toFixed(l);return u||(d=d.replace(t,"$1")),o&&(d=d.split(".").map((function(e,t){return 0===t?e.replace(n,o):e})).join(".")),d+s+c}function o(e){if("number"===typeof e&&!isNaN(e))return e;if("string"!==typeof e)return null;var n,t=i.exec(e),a="b";return t?(n=parseFloat(t[1]),a=t[4].toLowerCase()):(n=parseInt(e,10),a="b"),isNaN(n)?null:Math.floor(r[a]*n)}},3009:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/indexes",function(){return t(9460)}])},9862:function(e,n,t){"use strict";t.d(n,{Z:function(){return c}});var r=t(5893),i=t(7294),a=t(9604),o=t(1557),s=t(2881),l=t(6424),u=t(9599);function c(e){var n,t=(0,s.Z)(),c=(0,i.useState)(""),d=c[0],f=c[1];(0,i.useEffect)((function(){f("return ".concat((0,o.Pz)(e.value,!0),"\n"))}),[e.value]);var p=(0,i.useCallback)((function(e){e.onKeyDown((function(e){9===e.keyCode&&e.stopPropagation()}))}),[]),x=(0,i.useState)(!1),v=x[0],m=x[1],h=(0,i.useCallback)((function(e){f(e||"");try{e&&(0,o.Qc)(e.replace(/^return/,"")),m(!1)}catch(n){m(!0)}}),[]),y=(0,i.useMemo)((function(){return{tabSize:l.t.tabSize.get,readOnly:e.readOnly,wordWrap:"on",contextmenu:!1,scrollbar:{verticalScrollbarSize:0,horizontalSliderSize:0}}}),[e.readOnly]);return(0,r.jsx)(u.Z,{title:e.title,isOpen:e.isOpen,onDismiss:e.onDismiss,onDismissed:e.onDismissed,footer:null===(n=e.footer)||void 0===n?void 0:n.call(e,v),children:(0,r.jsx)("div",{style:{flex:1},onBlur:function(){try{var n;m(!1),null===(n=e.onChange)||void 0===n||n.call(e,(0,o.Qc)(d.replace(/^return/,"")))}catch(t){m(!0)}},children:(0,r.jsx)(a.ZP,{language:"typescript",value:d,onChange:h,theme:t?"vs-dark":"vs",onMount:p,options:y})})})}},9460:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return J}});var r=t(4051),i=t.n(r),a=t(5893),o=t(7294),s=t(6921),l=t(9277),u=t(8521),c=t(6605),d=t(3396),f=t(3203),p=t(9862),x=t(1043),v=t(6486),m=t(1397),h=t(6009),y=t(850),g=t(7860),b=t(9152),j=t(4323),k=t(3314),w=t(9235),I=t(6700),C=t(3234);function N(e){var n=(0,w.gh)(),t=(0,x.I0)(),r=(0,o.useState)(!0),i=r[0],s=r[1];return(0,o.useEffect)((function(){s(!e.target)}),[e.target]),(0,a.jsx)(I.r,{target:e.target,directionalHint:C.b.rightTopEdge,hidden:i,onDismiss:function(){s(!0)},items:[{key:"0",text:"View",iconProps:{iconName:"View"},onClick:function(){s(!0),t(h.N.indexes.setIsViewOpen(!0))}},{key:"1",text:"View Detail",iconProps:{iconName:"EntryView"},onClick:function(){s(!0),t(h.N.indexes.setIsDetailOpen(!0))}},{key:"2",text:"Drop",iconProps:{iconName:"Delete",styles:{root:{color:n.palette.red}}},onClick:function(){s(!0),t(h.N.indexes.setIsDialogHidden(!1))}}]})}var S=t(6992),D=t(4061),O=t(9830),P=t.n(O),Z=t(4736),E=t(1898),V=t(2887);function z(e){var n=(0,w.gh)(),t=(0,o.useCallback)((function(){return(0,a.jsx)("div",{style:{padding:10,maxWidth:500,maxHeight:500,overflowY:"scroll",backgroundColor:n.palette.neutralLighter},children:(0,a.jsx)(V.Z,{value:e.value.data})})}),[e.value.data,n.palette.neutralLighter]);return(0,a.jsx)(u.z,{type:c.C.plain,plainCardProps:{onRenderPlainCard:t},styles:{host:{display:"inherit",cursor:"pointer"}},instantOpenOnClick:!0,children:(0,a.jsx)(E.x,{styles:{root:{color:n.palette.themeSecondary}},children:e.value.text})},e.value.text)}function A(e){var n=(0,o.useMemo)((function(){return(0,v.compact)([(0,v.size)(e.value.key)>1&&!("textIndexVersion"in e.value)?{text:"compound",data:e.value.key}:null,e.value.unique?{text:"unique",data:{unique:e.value.unique}}:null,e.value.sparse?{text:"sparse",data:{sparse:e.value.sparse}}:null,e.value.partialFilterExpression?{text:"partial",data:{partialFilterExpression:e.value.partialFilterExpression}}:null,"expireAfterSeconds"in e.value?{text:"ttl",data:{expireAfterSeconds:e.value.expireAfterSeconds}}:null,"2dsphereIndexVersion"in e.value?{text:"2dsphere",data:{"2dsphereIndexVersion":e.value["2dsphereIndexVersion"]}}:null,"textIndexVersion"in e.value?{text:"text",data:{textIndexVersion:e.value.textIndexVersion,default_language:e.value.default_language,language_override:e.value.language_override,weights:e.value.weights}}:null,e.value.background?{text:"background",data:{background:e.value.background}}:null])}),[e.value]);return n.length?(0,a.jsx)(l.K,{horizontal:!0,tokens:{childrenGap:10},wrap:!0,children:n.map((function(e){return(0,a.jsx)(z,{value:e},e.text)}))}):null}var _=t(2672);function B(e){var n=(0,w.gh)();return(0,a.jsx)(l.K,{horizontal:!0,tokens:{childrenGap:10},wrap:!0,children:"textIndexVersion"in e.value?(0,v.map)(e.value.weights,(function(e,t){return(0,a.jsxs)(E.x,{styles:{root:{display:"flex",alignItems:"center",color:n.palette.neutralPrimaryAlt}},children:[t,":\xa0",e]},t)})):(0,v.map)(e.value.key,(function(e,t){return(0,a.jsxs)(E.x,{styles:{root:{display:"flex",alignItems:"center",color:n.palette.neutralPrimaryAlt}},children:[t,":\xa0",1===e?(0,a.jsx)(_.J,{iconName:"Up"}):-1===e?(0,a.jsx)(_.J,{iconName:"Down"}):"2dsphere"===e||"2d"===e?(0,a.jsx)(_.J,{iconName:"MapPin"}):null]},t)}))})}function M(e){var n=(0,w.gh)();switch(e.column.key){case"name":return(0,a.jsx)("span",{style:{color:n.palette.neutralPrimary},children:e.item.name});case"size":return void 0!==e.size?(0,a.jsx)(a.Fragment,{children:P()(e.size)}):null;case"ops":return e.accesses?(0,a.jsx)(a.Fragment,{children:(0,Z.u)(e.accesses.ops)}):null;case"since":return e.accesses?(0,a.jsx)("time",{children:(0,Z.p)(e.accesses.since)}):null;case"keys":return(0,a.jsx)(B,{value:e.item});case"features":return(0,a.jsx)(A,{value:e.item});default:return null}}var F=t(6361);function H(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function T(e,n,t,r,i,a,o){try{var s=e[a](o),l=s.value}catch(u){return void t(u)}s.done?n(l):Promise.resolve(l).then(r,i)}function R(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,s=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(l){s=!0,i=l}finally{try{o||null==t.return||t.return()}finally{if(s)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return H(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return H(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(){var e,n=(0,m.Az)().data,t=(0,m.dv)(),r=t.data,s=t.error,l=(0,m.XH)(),u=l.data,c=l.error,d=l.mutate,w=R((0,j.Z)(),1)[0],I=w.conn,C=w.database,O=w.collection,P=(0,k.R)(I),Z=(0,x.v9)((function(e){return e.indexes.invokedIndex})),E=(0,x.v9)((function(e){return e.indexes.isViewOpen})),V=(0,x.v9)((function(e){return e.indexes.isDetailOpen})),z=(0,x.v9)((function(e){return e.indexes.isDialogHidden})),A=(0,x.I0)(),_=(0,o.useState)(),B=_[0],H=_[1],K=(0,o.useCallback)((e=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Z&&C&&O?(0,g.f)(P,C,{dropIndexes:O,index:Z.name}):void 0);case 1:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){T(a,r,i,o,s,"next",e)}function s(e){T(a,r,i,o,s,"throw",e)}o(void 0)}))}),[O,P,C,Z]),L=(0,y.Z)(K);(0,o.useEffect)((function(){L.resolved&&(A(h.N.indexes.setIsDialogHidden(!0)),d())}),[L.resolved,A,d]);var q=(0,o.useMemo)((function(){return(0,v.keyBy)(null===n||void 0===n?void 0:n.cursor.firstBatch,"name")}),[n]),G=(0,o.useMemo)((function(){return(0,b.G)([["name",120],["features",240],["keys",240],["size",0],["ops",0],["since",160]])}),[]),$=(0,o.useCallback)((function(e,n,t){var i;return e&&t?(0,a.jsx)(M,{item:e,column:t,size:null===r||void 0===r?void 0:r.indexSizes[e.name],accesses:null===(i=q[e.name])||void 0===i?void 0:i.accesses}):null}),[r,q]),X=(0,o.useCallback)((function(e){return e.name||""}),[]),J=(0,o.useCallback)((function(e){e&&A(h.N.indexes.setInvokedIndex(e)),A(h.N.indexes.setIsViewOpen(!0))}),[A]),U=(0,o.useCallback)((function(e,n){null===e||void 0===e||e.preventDefault(),H(e),n&&A(h.N.indexes.setInvokedIndex(n))}),[A]);return s?(0,a.jsx)(f.Z,{iconName:"Error",title:"Error",content:s.message}):c?(0,a.jsx)(f.Z,{iconName:"Error",title:"Error",content:c.message}):u&&r?0===u.cursor.firstBatch.length?(0,a.jsx)(f.Z,{iconName:"Dictionary",title:"No Index"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(F.Z,{hidden:z,title:"Drop Index",subText:null===Z||void 0===Z?void 0:Z.name,onDismiss:function(){A(h.N.indexes.setIsDialogHidden(!0))},footer:(0,a.jsx)(S.Z,{text:"Drop",promise:L})}),(0,a.jsx)(p.Z,{title:"View Index: ".concat(null===Z||void 0===Z?void 0:Z.name),readOnly:!0,value:Z,isOpen:E,onDismiss:function(){A(h.N.indexes.setIsViewOpen(!1))}}),(0,a.jsx)(p.Z,{title:"View Index Detail: ".concat(null===Z||void 0===Z?void 0:Z.name),readOnly:!0,value:null===r||void 0===r?void 0:r.indexDetails[null===Z||void 0===Z?void 0:Z.name],isOpen:V,onDismiss:function(){A(h.N.indexes.setIsDetailOpen(!1))}}),(0,a.jsx)(N,{target:B}),(0,a.jsx)(D.Z,{items:u.cursor.firstBatch,columns:G,getKey:X,onItemInvoked:J,onItemContextMenu:U,onRenderItemColumn:$})]}):(0,a.jsx)(f.Z,{iconName:"HourGlass",title:"Loading"})}var L=t(6404),q=t(7534);function G(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function $(e,n,t,r,i,a,o){try{var s=e[a](o),l=s.value}catch(u){return void t(u)}s.done?n(l):Promise.resolve(l).then(r,i)}function X(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,s=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(l){s=!0,i=l}finally{try{o||null==t.return||t.return()}finally{if(s)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return G(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return G(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(){var e,n=X((0,j.Z)(),1)[0],t=n.conn,r=n.database,x=n.collection,v=(0,o.useState)(!1),h=v[0],b=v[1],w=(0,o.useState)({background:!0}),I=w[0],C=w[1],N=(0,m.XH)(),D=N.mutate,O=N.isValidating,P=(0,m.Az)(),Z=P.mutate,E=P.isValidating,z=(0,m.dv)(),A=z.mutate,_=z.isValidating,B=(0,k.R)(t),M=(0,o.useCallback)((e=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r&&x?(0,g.f)(B,r,{createIndexes:x,indexes:[I]}):void 0);case 1:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){$(a,r,i,o,s,"next",e)}function s(e){$(a,r,i,o,s,"throw",e)}o(void 0)}))}),[x,B,r,I]),F=(0,y.Z)(M),H=(0,o.useCallback)((function(){D(),Z(),A()}),[D,Z,A]);(0,o.useEffect)((function(){F.resolved&&(b(!1),H())}),[F.resolved,H]);var T=O||E||_,R=(0,o.useCallback)((function(){return(0,a.jsxs)("div",{style:{padding:10},children:[(0,a.jsx)("p",{style:{marginTop:0},children:"Example:"}),(0,a.jsx)(V.Z,{value:{name:"index_name",key:{a:1,b:-1},background:!0,unique:!0}}),(0,a.jsx)(s.a,{text:"Reference",iconProps:{iconName:"link"},onClick:function(){window.open("https://docs.mongodb.com/manual/reference/command/createIndexes/")},style:{marginTop:10}})]})}),[]);return r&&x?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(l.K,{horizontal:!0,tokens:{padding:10},children:[(0,a.jsx)(l.K.Item,{grow:!0,children:(0,a.jsx)(p.Z,{title:"Create Index for ".concat(r,".").concat(x),value:I,onChange:C,isOpen:h,onDismiss:function(){b(!1)},onDismissed:function(){C({background:!0})},footer:function(e){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(S.Z,{text:"Create",disabled:e,primary:!0,promise:F}),(0,a.jsx)(u.z,{type:c.C.plain,plainCardProps:{onRenderPlainCard:R},styles:{host:{display:"inherit",cursor:"pointer"}},instantOpenOnClick:!0,children:(0,a.jsx)(d.h,{iconProps:{iconName:"help"}})})]})}})}),(0,a.jsx)(d.h,{iconProps:{iconName:"Add"},onClick:function(){b(!0)},children:"Create"}),(0,a.jsx)(q.Z,{isRefreshing:T,onRefresh:H})]}),(0,a.jsx)(L.Z,{}),(0,a.jsx)(K,{})]}):(0,a.jsx)(f.Z,{iconName:"Back",title:"Select Collection"})}}},function(e){e.O(0,[300,583,833,738,774,888,179],(function(){return n=3009,e(e.s=n);var n}));var n=e.O();_N_E=n}]);