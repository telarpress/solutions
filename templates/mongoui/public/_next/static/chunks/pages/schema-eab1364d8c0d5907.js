(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[707],{8205:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/schema",function(){return e(5312)}])},6404:function(n,t,e){"use strict";e.d(t,{Z:function(){return i}});var r=e(5893),o=e(9235);function i(){var n=(0,o.gh)();return(0,r.jsx)("div",{style:{width:"100%",height:0,borderTopWidth:1,borderTopStyle:"solid",borderTopColor:n.palette.neutralLight}})}},3203:function(n,t,e){"use strict";var r=e(5893),o=e(7294),i=e(9235),a=e(2672),u=e(1898),c=e(6486);function l(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function s(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{},r=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e).filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})))),r.forEach((function(t){l(n,t,e[t])}))}return n}t.Z=(0,o.memo)((function(n){var t=(0,i.gh)();return(0,r.jsx)("div",{style:s({width:"100%",height:"100%",flex:1,display:"flex",alignItems:"center",justifyContent:"center"},n.style),children:(0,r.jsxs)("div",{style:{maxWidth:600,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(a.J,{iconName:n.iconName,styles:{root:{color:t.palette.neutralPrimaryAlt,fontSize:64,height:64,margin:20,wordBreak:"break-all"}}}),(0,r.jsx)(u.x,{variant:"xLarge",styles:{root:{color:t.palette.neutralSecondary,fontSize:48}},children:n.title})]}),n.content?(0,r.jsx)(u.x,{variant:"large",styles:{root:{color:t.palette.neutralSecondary,marginLeft:20,wordBreak:"break-all"}},children:n.content}):null,n.button]})})}),c.isEqual)},5312:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return N}});var r=e(4051),o=e.n(r),i=e(5893),a=e(7294),u=e(9277),c=e(5037),l=e(7318),s=e(215),f=e(9604),m=e(7860),y=e(2881),d=e(1557),p=e(3203),b=e(6486),g=e(9996),v=e.n(g);function h(n){return"string"===typeof n?{bsonType:["string"]}:"number"===typeof n?{bsonType:["number"]}:"boolean"===typeof n?{bsonType:["bool"]}:void 0===n||null===n?{bsonType:["null"]}:"$oid"in n?{bsonType:["objectId"]}:"$date"in n&&"$numberLong"in n.$date?{bsonType:["date"]}:"$numberDecimal"in n?{bsonType:["decimal"]}:"$numberDouble"in n?{bsonType:["double"]}:"$numberInt"in n?{bsonType:["int"]}:"$numberLong"in n?{bsonType:["long"]}:"$regularExpression"in n?{bsonType:["regex"]}:"$timestamp"in n?{bsonType:["timestamp"]}:"$binary"in n?{bsonType:["binData"]}:"$minKey"in n&&1===n.$minKey?{bsonType:["minKey"]}:"$maxKey"in n&&1===n.$maxKey?{bsonType:["maxKey"]}:Array.isArray(n)?{bsonType:["array"],items:v().all(n.map(h))}:{bsonType:["object"],properties:(0,b.mapValues)((0,b.omit)(n,["__v"]),h)}}function $(n){var t=(0,b.uniq)(n.bsonType);return(0,b.omitBy)({bsonType:1===t.length?t[0]:t,items:Array.isArray(n.items)?n.items.map($):n.items?$(n.items):void 0,properties:n.properties?(0,b.mapValues)(n.properties,$):void 0},b.isNil)}var x=e(9033),S=e(1397),j=e(6992),w=e(850),T=e(6404),O=e(6424),I=e(4323),A=e(3314);function D(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function k(n,t,e,r,o,i,a){try{var u=n[i](a),c=u.value}catch(l){return void e(l)}u.done?t(c):Promise.resolve(c).then(r,o)}function E(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(n){k(i,r,o,a,u,"next",n)}function u(n){k(i,r,o,a,u,"throw",n)}a(void 0)}))}}function _(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=e){var r,o,i=[],a=!0,u=!1;try{for(e=e.call(n);!(a=(r=e.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){u=!0,o=c}finally{try{a||null==e.return||e.return()}finally{if(u)throw o}}return i}}(n,t)||function(n,t){if(!n)return;if("string"===typeof n)return D(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);"Object"===e&&n.constructor&&(e=n.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return D(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(){var n=_((0,I.Z)(),1)[0],t=n.conn,e=n.database,r=n.collection,b=(0,S.mm)(),g=b.data,D=b.mutate,k=(0,y.Z)(),N=(0,a.useState)(null),K=N[0],L=N[1],z=(0,a.useState)(null),R=z[0],C=z[1],M=(0,a.useState)(""),P=M[0],Z=M[1],B=(0,A.R)(t),F=(0,a.useCallback)(E(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",e&&r?(0,m.f)(B,e,{collMod:r,validationAction:K,validationLevel:R,validator:{$jsonSchema:(0,d.Qc)(P.replace(/^return/,""))}}):void 0);case 1:case"end":return n.stop()}}),n)}))),[B,e,r,P,K,R]),H=(0,w.Z)(F);(0,a.useEffect)((function(){H.resolved&&D()}),[H.resolved,D]),(0,a.useEffect)((function(){var n;if(null===g||void 0===g?void 0:g.cursor.firstBatch[0]){var t=g.cursor.firstBatch[0].options,e=(0,d.Pz)(null===(n=t.validator)||void 0===n?void 0:n.$jsonSchema,!0);L(t.validationAction||null),C(t.validationLevel||null),Z(e?"return ".concat(e):"return {}")}}),[g]);var U=(0,a.useCallback)((function(n){Z(n||"")}),[]),W=(0,a.useMemo)((function(){return{tabSize:O.t.tabSize.get,wordWrap:"on",contextmenu:!1,scrollbar:{verticalScrollbarSize:0,horizontalSliderSize:0}}}),[]),J=(0,a.useCallback)(E(o().mark((function n(){var t,i;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e&&r){n.next=2;break}return n.abrupt("return",void 0);case 2:return n.next=4,(0,m.f)(B,e,{find:r},{canonical:!0});case 4:return t=n.sent,i=t.cursor.firstBatch,n.abrupt("return",(0,d.Pz)((o=i,$(v().all(o.map(h)))),!0));case 7:case"end":return n.stop()}var o}),n)}))),[r,B,e]),V=(0,w.Z)(J);return(0,a.useEffect)((function(){var n=V.resolved;void 0!==n&&(Z(n?"return ".concat(n):"return {}"),K||L(x.w_.WARN),R||C(x.Ht.OFF))}),[V.resolved,K,R]),e&&r?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f.ZP,{language:"typescript",theme:k?"vs-dark":"vs",value:P,onChange:U,options:W}),(0,i.jsx)(T.Z,{}),(0,i.jsxs)(u.K,{horizontal:!0,tokens:{padding:10},styles:{root:{height:52,display:"flex",alignItems:"center",justifyContent:"space-between"}},children:[(0,i.jsx)(c._,{styles:{root:{marginRight:10}},children:"Validation action:"}),(0,i.jsx)(l.L,{selectedKey:K,onChange:function(n,t){L(null===t||void 0===t?void 0:t.key)},errorMessage:P&&!K?" ":void 0,styles:{root:{marginRight:10,width:140,height:32}},options:[{key:x.w_.WARN,text:x.w_.WARN},{key:x.w_.ERROR,text:x.w_.ERROR}],placeholder:"please select"}),(0,i.jsx)(c._,{styles:{root:{marginLeft:20,marginRight:10}},children:"Validation level:"}),(0,i.jsx)(l.L,{selectedKey:R,onChange:function(n,t){C(null===t||void 0===t?void 0:t.key)},errorMessage:P&&!R?" ":void 0,styles:{root:{width:140,height:32}},options:[{key:x.Ht.OFF,text:x.Ht.OFF},{key:x.Ht.MODERATE,text:x.Ht.MODERATE},{key:x.Ht.STRICT,text:x.Ht.STRICT}],placeholder:"please select"}),(0,i.jsx)(u.K.Item,{grow:!0,children:(0,i.jsx)("div",{})}),(0,i.jsx)(s.G,{content:"Auto generate schema",children:(0,i.jsx)(j.Z,{icon:"AutoEnhanceOn",promise:V})}),(0,i.jsx)(j.Z,{icon:"CheckMark",disabled:!K||!R||!P,promise:H})]})]}):(0,i.jsx)(p.Z,{iconName:"Back",title:"Select Collection"})}},1557:function(n,t,e){"use strict";e.d(t,{Pz:function(){return f},vH:function(){return m},Qc:function(){return y}});var r=e(5058),o=e.n(r),i=e(4736),a=e(6424);function u(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function c(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=e){var r,o,i=[],a=!0,u=!1;try{for(e=e.call(n);!(a=(r=e.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){u=!0,o=c}finally{try{a||null==e.return||e.return()}finally{if(u)throw o}}return i}}(n,t)||function(n,t){if(!n)return;if("string"===typeof n)return u(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);"Object"===e&&n.constructor&&(e=n.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return u(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(n){var t=n.toString();return t.includes("-")||t.includes(" ")||t.includes(".")||/^\d/.test(t)?'"'.concat(n,'"'):n}var s=Array.from({length:a.t.tabSize.get}).map((function(){return" "})).join("");function f(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if("string"===typeof n)return JSON.stringify(n);if("number"===typeof n)return n.toString();if("boolean"===typeof n)return"".concat(n);if(void 0===n)return"";if(null===n)return"null";if("$oid"in n)return'ObjectId("'.concat(n.$oid,'")');if("$date"in n&&"$numberLong"in n.$date)return a.t.timezoneOffset?'Date("'.concat((0,i.p)(parseInt(n.$date.$numberLong,10)),'")'):'ISODate("'.concat(new Date(parseInt(n.$date.$numberLong,10)).toISOString(),'")');if("$numberDecimal"in n)return'NumberDecimal("'.concat(n.$numberDecimal,'")');if("$numberDouble"in n)return n.$numberDouble;if("$numberInt"in n)return n.$numberInt;if("$numberLong"in n)return'NumberLong("'.concat(n.$numberLong,'")');if("$regularExpression"in n)return"/".concat(n.$regularExpression.pattern,"/").concat(n.$regularExpression.options||"");if("$timestamp"in n)return"Timestamp(".concat(n.$timestamp.t,", ").concat(n.$timestamp.i,")");if("$binary"in n)return"BinData(".concat(parseInt(n.$binary.subType,16),', "').concat(n.$binary.base64,'")');if("$minKey"in n&&1===n.$minKey)return"MinKey()";if("$maxKey"in n&&1===n.$maxKey)return"MaxKey()";if(Array.isArray(n)){if(!t)return"[".concat(n.map((function(n){return"".concat(f(n,t,e+a.t.tabSize.get))})).join(", "),"]");var r=Array.from({length:e}).map((function(){return" "})).join("");return n.length?"[\n".concat(n.map((function(n){return"".concat(s).concat(r).concat(f(n,t,e+a.t.tabSize.get))})).join(",\n"),"\n").concat(r,"]"):"[]"}var o=Object.entries(n);if(0===o.length)return"{}";if(!t)return"{ ".concat(o.map((function(n){var r=c(n,2),o=r[0],i=r[1];return"".concat(l(o),": ").concat(f(i,t,e+a.t.tabSize.get))})).join(", ")," }");var u=Array.from({length:e}).map((function(){return" "})).join("");return"{\n".concat(o.map((function(n){var r=c(n,2),o=r[0],i=r[1];return"".concat(s).concat(u).concat(l(o),": ").concat(f(i,t,e+a.t.tabSize.get))})).join(",\n"),"\n").concat(u,"}")}var m={SubType:{Generic:0,Function:1,Binary_old:2,UUID_old:3,UUID:4,MD5:5,Encrypted:6,UserDefined:128},ObjectId:function(n){return{$oid:n}},Date:function(n){return{$date:{$numberLong:void 0!==n?new Date(n).getTime().toString():(new Date).getTime().toString()}}},ISODate:function(n){return{$date:{$numberLong:void 0!==n?new Date(n).getTime().toString():(new Date).getTime().toString()}}},NumberDecimal:function(n){return{$numberDecimal:n.toString()}},NumberInt:function(n){return{$numberInt:n.toString()}},NumberLong:function(n){return{$numberLong:n.toString()}},Timestamp:function(n,t){return{$timestamp:{t:n,i:t}}},BinData:function(n,t){return{$binary:{base64:t,subType:n.toString(16)}}},MinKey:function(){return{$minKey:1}},MaxKey:function(){return{$maxKey:1}}};function y(n){return JSON.parse(JSON.stringify(o()(n,m),(function(n,t){return e=t,(null!=(r=RegExp)&&"undefined"!==typeof Symbol&&r[Symbol.hasInstance]?r[Symbol.hasInstance](e):e instanceof r)?{$regularExpression:{pattern:t.source,options:t.flags}}:t;var e,r})))}},4736:function(n,t,e){"use strict";e.d(t,{u:function(){return l},p:function(){return s}});var r=e(7484),o=e.n(r),i=e(178),a=e.n(i),u=e(6424);o().extend(a());var c=Intl.NumberFormat();function l(n){return c.format(n)}function s(n){return 0===u.t.timezoneOffset.get?new Date(n).toISOString():o()(n).utcOffset(u.t.timezoneOffset.get).format()}}},function(n){n.O(0,[300,318,973,774,888,179],(function(){return t=8205,n(n.s=t);var t}));var t=n.O();_N_E=t}]);