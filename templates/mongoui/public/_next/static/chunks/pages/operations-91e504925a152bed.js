(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[394],{11307:function(e,o,t){"use strict";t.d(o,{Z:function(){return b}});var n=t(61844),r=t(97582),i=t(67294),s=t(42719),a=t(40229),l=t(79785),d=t(55395),c=t(17966),u=t(55037),p=(0,l.y)(),g="Toggle",m=i.forwardRef(function(e,o){var t=e.as,n=e.ariaLabel,l=e.checked,m=e.className,h=e.defaultChecked,b=e.disabled,x=e.inlineLabel,k=e.label,v=e.offAriaLabel,C=e.offText,y=e.onAriaLabel,N=e.onChange,I=e.onChanged,j=e.onClick,w=e.onText,E=e.role,T=e.styles,Z=e.theme,H=(0,s.G)(l,void 0!==h&&h,i.useCallback(function(e,o){null==N||N(e,o),null==I||I(o)},[N,I])),O=H[0],S=H[1],_=p(T,{theme:Z,className:m,disabled:b,checked:O,inlineLabel:x,onOffMissing:!w&&!C}),B=O?y:v,L=(0,a.M)(g,e.id),P="".concat(L,"-label"),R="".concat(L,"-stateText"),M=O?w:C,$=(0,d.pq)(e,d.Gg,["defaultChecked"]),z=void 0;n||B||(k&&(z=P),!M||z||(z=R));var D=i.useRef(null);(0,c.Pr)(D),f(e,O,D);var q={root:{className:_.root,hidden:$.hidden},label:{children:k,className:_.label,htmlFor:L,id:P},container:{className:_.container},pill:(0,r.pi)((0,r.pi)({},$),{"aria-disabled":b,"aria-checked":O,"aria-label":n||B,"aria-labelledby":z,className:_.pill,"data-is-focusable":!0,"data-ktp-target":!0,disabled:b,id:L,onClick:function(e){!b&&(S(!O,e),j&&j(e))},ref:D,role:E||"switch",type:"button"}),thumb:{className:_.thumb},stateText:{children:M,className:_.text,htmlFor:L,id:R}};return i.createElement(void 0===t?"div":t,(0,r.pi)({ref:o},q.root),k&&i.createElement(u._,(0,r.pi)({},q.label)),i.createElement("div",(0,r.pi)({},q.container),i.createElement("button",(0,r.pi)({},q.pill),i.createElement("span",(0,r.pi)({},q.thumb))),(O&&w||C)&&i.createElement(u._,(0,r.pi)({},q.stateText))))});m.displayName=g+"Base";var f=function(e,o,t){i.useImperativeHandle(e.componentRef,function(){return{get checked(){return!!o},focus:function(){t.current&&t.current.focus()}}},[o,t])},h=t(70161),b=(0,n.z)(m,function(e){var o,t,n,i,s,a,l,d=e.theme,c=e.className,u=e.disabled,p=e.checked,g=e.inlineLabel,m=e.onOffMissing,f=d.semanticColors,b=d.palette,x=f.bodyBackground,k=f.inputBackgroundChecked,v=f.inputBackgroundCheckedHovered,C=b.neutralDark,y=f.disabledBodySubtext,N=f.smallInputBorder,I=f.inputForegroundChecked,j=f.disabledBodySubtext,w=f.disabledBackground,E=f.smallInputBorder,T=f.inputBorderHovered,Z=f.disabledBodySubtext,H=f.disabledText;return{root:["ms-Toggle",p&&"is-checked",!u&&"is-enabled",u&&"is-disabled",d.fonts.medium,{marginBottom:"8px"},g&&{display:"flex",alignItems:"center"},c],label:["ms-Toggle-label",{display:"inline-block"},u&&{color:H,selectors:((o={})[h.qJ]={color:"GrayText"},o)},g&&!m&&{marginRight:16},m&&g&&{order:1,marginLeft:16},g&&{wordBreak:"break-word"}],container:["ms-Toggle-innerContainer",{display:"flex",position:"relative"}],pill:["ms-Toggle-background",(0,h.GL)(d,{inset:-3}),{fontSize:"20px",boxSizing:"border-box",width:40,height:20,borderRadius:10,transition:"all 0.1s ease",border:"1px solid ".concat(E),background:x,cursor:"pointer",display:"flex",alignItems:"center",padding:"0 3px",overflow:"visible"},!u&&[!p&&{selectors:{":hover":[{borderColor:T}],":hover .ms-Toggle-thumb":[{backgroundColor:C,selectors:((t={})[h.qJ]={borderColor:"Highlight"},t)}]}},p&&[{background:k,borderColor:"transparent",justifyContent:"flex-end"},{selectors:((n={":hover":[{backgroundColor:v,borderColor:"transparent",selectors:((i={})[h.qJ]={backgroundColor:"Highlight"},i)}]})[h.qJ]=(0,r.pi)({backgroundColor:"Highlight"},(0,h.xM)()),n)}]],u&&[{cursor:"default"},!p&&[{borderColor:Z}],p&&[{backgroundColor:y,borderColor:"transparent",justifyContent:"flex-end"}]],!u&&{selectors:{"&:hover":{selectors:((s={})[h.qJ]={borderColor:"Highlight"},s)}}}],thumb:["ms-Toggle-thumb",{display:"block",width:12,height:12,borderRadius:"50%",transition:"all 0.1s ease",backgroundColor:N,borderColor:"transparent",borderWidth:6,borderStyle:"solid",boxSizing:"border-box"},!u&&p&&[{backgroundColor:I,selectors:((a={})[h.qJ]={backgroundColor:"Window",borderColor:"Window"},a)}],u&&[!p&&[{backgroundColor:j}],p&&[{backgroundColor:w}]]],text:["ms-Toggle-stateText",{selectors:{"&&":{padding:"0",margin:"0 8px",userSelect:"none",fontWeight:h.lq.regular}}},u&&{selectors:{"&&":{color:H,selectors:((l={})[h.qJ]={color:"GrayText"},l)}}}]}},void 0,{scope:"Toggle"})},35161:function(e,o,t){var n=t(29932),r=t(67206),i=t(69199),s=t(1469);e.exports=function(e,o){return(s(e)?n:i)(e,r(o,3))}},16046:function(e,o,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/operations",function(){return t(47937)}])},89697:function(e,o,t){"use strict";t.d(o,{Z:function(){return c}});var n=t(85893),r=t(70161),i=t(56700),s=t(53234),a=t(67294),l=t(45007),d=t(41762);function c(e){let o=(0,l.I0)(),t=(0,r.gh)(),c=(0,l.v9)(e=>e.operations.isMenuHidden);return(0,a.useEffect)(()=>{o(d.N.operations.setIsMenuHidden(!e.target))},[o,e.target]),(0,n.jsx)(i.r,{target:e.target,directionalHint:s.b.rightTopEdge,hidden:c,onDismiss:()=>{o(d.N.operations.setIsMenuHidden(!0))},items:[{key:"0",text:"View",iconProps:{iconName:"View"},onClick(){o(d.N.operations.setIsMenuHidden(!0)),o(d.N.operations.setIsEditorOpen(!0))}},{key:"1",text:"Kill",iconProps:{iconName:"StatusCircleBlock",styles:{root:{color:t.palette.red}}},onClick(){o(d.N.operations.setIsDialogHidden(!1))}}]})}},21598:function(e,o,t){"use strict";t.a(e,async function(e,n){try{t.d(o,{Z:function(){return E}});var r=t(85893),i=t(16921),s=t(67294),a=t(45007),l=t(39693),d=t.n(l),c=t(70813),u=t(41762),p=t(67849),g=t(79989),m=t(26162),f=t(12142),h=t(54927),b=t(56529),x=t(6558),k=t(77752),v=t(89697),C=t(24576),y=t(64262),N=t(87929),I=t(34152),j=t(82935),w=e([c,m,x]);[c,m,x]=w.then?(await w)():w;let T=(0,f.G)(d()([["ns",100],["opid",100],["op",100],["ms",100],["planSummary",100],["msg",200],["client",100],["clientMetadata",200]]));function E(){let{data:e,error:o,mutate:t}=(0,c.Wb)(),[{conn:n,collection:l},d]=(0,b.Z)(),f=(0,x.R)(n),[w,E]=(0,s.useState)(),Z=(0,a.v9)(e=>e.operations.invokedOperation),H=(0,a.v9)(e=>e.operations.host),O=H?(0,h.U)(H,f):f,S=(0,a.v9)(e=>e.operations.isEditorOpen),_=(0,a.v9)(e=>e.operations.isDialogHidden),B=(0,a.I0)(),L=(0,s.useCallback)(async()=>Z&&O?(0,m.f)(O,"admin",{killOp:1,op:Z.opid}):null,[O,Z]),P=(0,g.Z)(L);(0,s.useEffect)(()=>{P.resolved&&(B(u.N.operations.setIsEditorOpen(!1)),B(u.N.operations.setIsDialogHidden(!0)),t())},[P.resolved,B,t]);let R=(0,s.useCallback)((e,o,t)=>{var n;let i=null==e?void 0:e[null==t?void 0:t.key];return(0,r.jsx)(I.Z,{value:(null==t?void 0:t.key)==="ms"?Math.ceil(parseInt((null==e?void 0:null===(n=e.microsecs_running)||void 0===n?void 0:n.$numberLong)||"0",10)/1e3):i})},[]),M=(0,s.useCallback)((e,o)=>{var t;return(null===(t=e.opid)||void 0===t?void 0:t.$numberInt)||(0,p.Pz)(e)+o},[]);return o?(0,r.jsx)(k.Z,{iconName:"Error",title:"Error",content:o.message}):e?0===e.inprog.length?(0,r.jsx)(k.Z,{iconName:"AnalyticsReport",title:"No Operation",button:l?(0,r.jsx)(i.a,{text:"View all operations",onClick:()=>{d({conn:n})}}):null}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v.Z,{target:w}),Z?(0,r.jsx)(C.Z,{tabs:["cursor","command","originatingCommand","lockStats"],title:"View Operation: ".concat(Z?(0,p.Pz)(Z.opid):""),value:Z,isOpen:S,onDismiss:()=>{B(u.N.operations.setIsEditorOpen(!1))},footer:(0,r.jsx)(i.a,{text:"Kill",onClick:()=>{B(u.N.operations.setIsDialogHidden(!1))}})}):null,(0,r.jsx)(j.Z,{hidden:_,title:"Kill Operation",subText:(0,p.Pz)(null==Z?void 0:Z.opid),onDismiss:()=>{B(u.N.operations.setIsDialogHidden(!0))},footer:(0,r.jsx)(y.Z,{text:"Kill",promise:P})}),(0,r.jsx)(N.Z,{items:e.inprog,getKey:M,columns:T,onRenderItemColumn:R,onItemInvoked:e=>{e&&B(u.N.operations.setInvokedOperation(e)),B(u.N.operations.setIsEditorOpen(!0))},onItemContextMenu:(e,o)=>{null==e||e.preventDefault(),E(e),o&&B(u.N.operations.setInvokedOperation(o))}})]}):(0,r.jsx)(k.Z,{iconName:"HourGlass",title:"Loading"})}n()}catch(e){n(e)}})},7417:function(e,o,t){"use strict";t.d(o,{Z:function(){return l}});var n=t(85893),r=t(90663),i=t(13396),s=t(67294),a=t(67849);function l(e){let[o,t]=(0,s.useState)(),[l,d]=(0,s.useState)("");(0,s.useEffect)(()=>{d((0,a.Pz)(e.value))},[e.value]);let c=(0,s.useCallback)(()=>{try{e.onChange(l?(0,a.Qc)(l):void 0)}catch(e){console.error(e),t(" ")}},[l,e.value,e.onChange]);return(0,n.jsxs)("div",{style:{flex:1,display:"flex"},children:[(0,n.jsx)(r.n,{autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",autoSave:"off",spellCheck:!1,styles:{root:{flex:1},prefix:{cursor:"default"}},prefix:e.prefix,errorMessage:o,value:l,onBlur:c,onKeyDown:e=>{"Enter"===e.key&&c()},onChange:(e,o)=>{d(o||""),t(void 0)}}),e.iconProps&&e.menuProps?(0,n.jsx)(i.h,{iconProps:e.iconProps,menuProps:e.menuProps,menuIconProps:{hidden:!0}}):null]})}},47937:function(e,o,t){"use strict";t.a(e,async function(e,n){try{t.r(o),t.d(o,{default:function(){return I}});var r=t(85893),i=t(67294),s=t(19277),a=t(55037),l=t(16921),d=t(11307),c=t(35161),u=t.n(c),p=t(57557),g=t.n(p),m=t(45007),f=t(7417),h=t(70813),b=t(21598),x=t(41762),k=t(8817),v=t(19845),C=t(49876),y=t(56529),N=e([h,b,v]);[h,b,v]=N.then?(await N)():N;let j={"Slow operations":{active:!0,microsecs_running:{$gte:1e5}},"Queries not using any index":{op:"query",planSummary:"COLLSCAN"},"Write operations":{$or:[{op:{$in:["insert","update","remove"]}},{"command.findandmodify":{$exists:!0}}]},"Waiting for a Lock":{waitingForLock:!0},"Operations with no yields":{numYields:0,waitingForLock:!1},"Operations with high yields num":{numYields:{$gte:100}},"Indexing operations":{$or:[{op:"command","command.createIndexes":{$exists:!0}},{op:"none",msg:{$regularExpression:{pattern:"^Index Build",options:""}}}]}};function I(){let[{database:e}]=(0,y.Z)(),o=(0,m.v9)(e=>e.operations.filter),t=(0,m.v9)(e=>e.operations.refreshInterval),[n,c]=(0,i.useState)(),p=(0,m.I0)(),N=(0,i.useMemo)(()=>{if(e)return{$regex:{$regularExpression:{pattern:"".concat(e,".*"),options:""}}}},[e]);(0,i.useEffect)(()=>{p(x.N.operations.setNs(N))},[N,p]);let{mutate:I,isValidating:w}=(0,h.Wb)(),E=(0,i.useMemo)(()=>N?{...o,ns:N}:g()(o,"ns"),[N,o]),T=(0,m.v9)(e=>e.operations.host),Z=(0,i.useCallback)(e=>{p(x.N.operations.setHost(e))},[p]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.K,{wrap:!0,horizontal:!0,tokens:{childrenGap:10,padding:10},styles:{root:{marginBottom:-10},inner:{alignItems:"center"}},children:[(0,r.jsx)(a._,{style:{margin:5},children:"Suggested filters:"}),u()(j,(e,o)=>(0,r.jsx)(l.a,{text:o,primary:n===o,onClick:()=>{c(n===o?void 0:o),p(x.N.operations.setFilter(n!==o&&o?j[o]:{}))}},o))]}),(0,r.jsxs)(s.K,{horizontal:!0,tokens:{childrenGap:10,padding:10},styles:{root:{height:52,alignItems:"center"}},children:[(0,r.jsx)(a._,{children:"Host:"}),(0,r.jsx)(v.Z,{style:{marginRight:10},host:T,setHost:Z}),(0,r.jsx)(a._,{children:"Filter:"}),(0,r.jsx)(s.K.Item,{styles:{root:{marginRight:10}},grow:!0,children:(0,r.jsx)(f.Z,{value:E,onChange:e=>{c(void 0),p(x.N.operations.setFilter(e))}})}),(0,r.jsx)(d.Z,{inlineLabel:!0,label:"Auto refresh:",onText:" ",offText:" ",styles:{label:{marginRight:10},root:{margin:0,display:"flex",alignItems:"center"}},checked:0!==t,onChange:(e,o)=>{p(x.N.operations.setRefreshInterval(o?1e3:0))}}),(0,r.jsx)(C.Z,{isRefreshing:w,onRefresh:I})]}),(0,r.jsx)(k.Z,{}),(0,r.jsx)(b.Z,{})]})}n()}catch(e){n(e)}})}},function(e){e.O(0,[300,295,345,557,712,888,774,179],function(){return e(e.s=16046)}),_N_E=e.O()}]);